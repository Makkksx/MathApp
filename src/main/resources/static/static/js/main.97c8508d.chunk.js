(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{681:function(e,t,n){},683:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(35),s=n.n(r),o=n(13),i=n(704),u=n(695),j=n(703),l=n(64),d=n(46),b=n(227),h=Object(b.a)({apiKey:"AIzaSyAZCTYk0aTKjj0d8ihntd_GuzdodUT4RVQ",authDomain:"poised-cathode-325720.firebaseapp.com",projectId:"poised-cathode-325720",storageBucket:"poised-cathode-325720.appspot.com",messagingSenderId:"286350985232",appId:"1:286350985232:web:bbd8c1efc44e336bd06295",measurementId:"G-LHMQMJVMPJ"}),p=n(1),f=a.a.createContext(),O=Object(d.d)(h),x=function(e){var t=e.children,n=Object(c.useState)(null),a=Object(o.a)(n,2),r=a[0],s=a[1],i=Object(c.useState)(!0),u=Object(o.a)(i,2),j=u[0],l=u[1];return Object(c.useEffect)((function(){O.onAuthStateChanged((function(e){s(e),l(!1)}))}),[]),j?Object(p.jsx)(p.Fragment,{children:"Loading..."}):Object(p.jsx)(f.Provider,{value:{currentUser:r},children:t})},m=n(26),g=n(30),v=n(2),k=n.n(v),w=n(5),y=n(170),C=n(23),T=n.n(C),S=function(){var e=Object(m.b)(),t=Object(c.useContext)(f).currentUser,n=Object(c.useState)(!0),a=Object(o.a)(n,2),r=a[0],s=a[1],i=Object(c.useState)(!1),u=Object(o.a)(i,2),j=u[0],l=u[1];Object(c.useEffect)((function(){var n=function(){var n=Object(w.a)(k.a.mark((function n(){return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.getIdToken(!0).then(function(){var t=Object(w.a)(k.a.mark((function t(n){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.a.get("/auth/getDarkMode",{headers:{"Content-Type":"application/json",idToken:n}}).then((function(e){l(e.data),s(!1)})).catch((function(t){e.show("No access!",{timeout:2e3,type:"error"}),console.log(t)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.show("Bad token",{timeout:2e3,type:"error"}),console.log(t)}));case 2:return n.abrupt("return",j);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();t&&n().catch((function(e){console.log(e)}))}),[e,t,j]);var d=function(){var n=Object(w.a)(k.a.mark((function n(){return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.getIdToken(!0).then(function(){var t=Object(w.a)(k.a.mark((function t(n){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.a.post("/auth/changeDarkMode",[],{headers:{"Content-Type":"application/json",idToken:n}}).catch((function(t){e.show("No access!",{timeout:2e3,type:"error"}),console.log(t)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.show("Bad token",{timeout:2e3,type:"error"}),console.log(t)}));case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),b=function(){var e=Object(w.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,d();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t?r?Object(p.jsx)("div",{}):Object(p.jsx)(y.a,{defaultDarken:j,onChange:b}):Object(p.jsx)(y.a,{})};function N(){var e=Object(g.k)(),t=Object(c.useContext)(f).currentUser,n=Object(c.useState)(!1),a=Object(o.a)(n,2),r=a[0],s=a[1],b=Object(m.b)();Object(c.useEffect)((function(){t?t.getIdTokenResult().then((function(e){e.claims.admin&&!r&&s(!0)})).catch((function(e){b.show("Bad token",{timeout:2e3,type:"error"}),console.log(e)})):s(!1)}),[t,r,b]);return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(i.a,{bg:"light",expand:"lg",children:[Object(p.jsxs)(u.a,{children:[Object(p.jsx)(l.LinkContainer,{to:"/",children:Object(p.jsx)(i.a.Brand,{children:"MathApp"})}),Object(p.jsx)(i.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(p.jsxs)(i.a.Collapse,{id:"basic-navbar-nav",children:[Object(p.jsxs)(j.a,{className:"me-auto",children:[Object(p.jsx)(l.LinkContainer,{to:"/home",children:Object(p.jsx)(j.a.Link,{children:"Home"})}),r?Object(p.jsx)(l.LinkContainer,{to:"/admin",children:Object(p.jsx)(j.a.Link,{children:"Admin"})}):Object(p.jsx)("div",{}),t?Object(p.jsx)(l.LinkContainer,{to:"/task/create",children:Object(p.jsx)(j.a.Link,{children:"Create task"})}):Object(p.jsx)("div",{})]}),Object(p.jsx)(j.a,{children:t?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(l.LinkContainer,{to:"/profile/"+t.uid,children:Object(p.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Profile"})}),Object(p.jsx)("button",{className:"btn btn-primary mx-2",onClick:function(){Object(d.d)().signOut().then((function(){return e.push("/home")}))},type:"submit",children:"Sign-out"})]}):Object(p.jsx)(l.LinkContainer,{to:"/login",children:Object(p.jsx)("button",{className:"btn btn-primary mx-2",type:"submit",children:"Sign-up"})})})]})]}),Object(p.jsx)(S,{})]})})}var I=n(38),F=n(229);function E(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(m.b)();return Object(c.useEffect)((function(){function e(){return(e=Object(w.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("/task/utils/getAllTags").then((function(e){a(e.data)})).catch((function(e){r.show("No access!",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return e.apply(this,arguments)})().catch((function(e){console.log(e)}))}),[r]),Object(p.jsx)(F.TagCloud,{minSize:12,maxSize:35,tags:n})}var U=n(32),L=n(234),P=n(702),D=n(706),B=n(696),A=n(697),R=n(66),z=Object(R.b)(),G=function(e){return new Promise((function(t,n){Object(R.a)(Object(R.c)(z,e)).then(function(){var e=Object(w.a)(k.a.mark((function e(c){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get(c).then((function(e){t(e.data)})).catch((function(e){n(new Error("No access!")),console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))},H=n(88),V=n(104);function M(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(m.b)(),s=Object(c.useState)("dateUp"),i=Object(o.a)(s,2),j=i[0],d=i[1],b=Object(c.useState)(!0),h=Object(o.a)(b,2),O=h[0],x=h[1],g=Object(c.useContext)(f).currentUser;if(Object(c.useEffect)((function(){function e(){return e=Object(w.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("/task/getAllTasks").then(function(){var e=Object(w.a)(k.a.mark((function e(t){var n,c,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(U.a)(t.data),e.prev=1,r=k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.value,e.next=3,G(t.conditionURL).then((function(e){t.condition=e}));case 3:case"end":return e.stop()}}),e)})),n.s();case 4:if((c=n.n()).done){e.next=8;break}return e.delegateYield(r(),"t0",6);case 6:e.next=4;break;case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(1),n.e(e.t1);case 13:return e.prev=13,n.f(),e.finish(13);case 16:a(t.data.sort((function(e,t){return t.id-e.id}))),x(!1);case 18:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){r.show("No access!",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}(function(){return e.apply(this,arguments)})().catch((function(e){console.log(e)}))}),[r]),O)return Object(p.jsx)(p.Fragment,{children:"Loading..."});return Object(p.jsxs)(u.a,{className:"mt-2",children:[Object(p.jsx)(L.a,{md:3,className:"text-end",children:Object(p.jsxs)(P.a.Select,{value:j,onChange:function(e){d(e.target.value),"dateUp"===e.target.value?a(n.sort((function(e,t){return t.id-e.id}))):"ratingUp"===e.target.value?a(n.sort((function(e,t){return t.rating-e.rating}))):"dateDown"===e.target.value?a(n.sort((function(e,t){return e.id-t.id}))):"ratingDown"===e.target.value&&a(n.sort((function(e,t){return e.rating-t.rating})))},children:[Object(p.jsx)("option",{value:"dateUp",children:"Sort by date (recent first)"}),Object(p.jsx)("option",{value:"dateDown",children:"Sort by date (recent first)"}),Object(p.jsx)("option",{value:"ratingUp",children:"Sort by rating (high first)"}),Object(p.jsx)("option",{value:"ratingDown",children:"Sort by rating (high first)"})]})}),n.map((function(e,t){return Object(p.jsxs)(D.a,{className:"mt-2",children:[Object(p.jsxs)(D.a.Header,{children:[Object(p.jsx)(D.a.Title,{as:"h2",children:e.title}),Object(p.jsx)(V.RatingView,{ratingValue:e.rating}),Object(p.jsx)(D.a.Subtitle,{className:"text-muted",children:e.theme}),e.tags.map((function(e,t){return Object(p.jsx)(B.a,{bg:"primary",className:"mx-1",children:e},t)}))]}),Object(p.jsxs)(D.a.Body,{children:[Object(p.jsx)(H.a.Markdown,{source:e.condition}),g?Object(p.jsx)(l.LinkContainer,{to:"/task/"+e.id,children:Object(p.jsx)(A.a,{className:"mt-2",children:"Go to task"})}):Object(p.jsx)("div",{})]})]},t)}))]})}var Y=function(){return Object(p.jsxs)("div",{className:"container mt-3 text-center",children:[Object(p.jsx)(E,{}),Object(p.jsx)(M,{})]})},q=n(132),J=n.n(q),K=(n(205),n(133)),Q=n.n(K);function W(){var e=Object(c.useContext)(f).currentUser,t=Object(c.useState)([]),n=Object(o.a)(t,2),a=n[0],r=n[1],s=Object(m.b)(),i=Object(g.k)(),u={onClick:function(e,t,n){i.push("/profile/"+t.uid)}};return Object(c.useEffect)((function(){e?e.getIdToken(!0).then(function(){var e=Object(w.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("/admin/getAll",{headers:{"Content-Type":"application/json",idToken:t}}).then((function(e){r(e.data)})).catch((function(e){s.show("You are not an admin!",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){s.show("No access!",{timeout:2e3,type:"error"}),console.log(e)})):s.show("Please login to view",{timeout:2e3,type:"error"})}),[s,e]),Object(p.jsx)("div",{className:"container mt-5",children:Object(p.jsx)(J.a,{striped:!0,hover:!0,keyField:"id",data:a,columns:[{dataField:"uid",text:"ID",sort:!0},{dataField:"username",text:"Name",sort:!0},{dataField:"email",text:"Email",sort:!0},{dataField:"provider",text:"Provider",sort:!0}],rowEvents:u,pagination:Q()({sizePerPage:5,hideSizePerPage:!0})})})}var _=function(){return Object(p.jsx)(u.a,{children:Object(p.jsx)(W,{})})},Z=new d.c,X=new d.a,$=new d.b,ee=Object(d.d)(h),te=function(){var e=Object(m.b)(),t=Object(c.useContext)(f).currentUser,n=function(){var t=Object(w.a)(k.a.mark((function t(n){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(d.e)(ee,n);case 2:return t.next=4,ee.currentUser.getIdToken(!0).then((function(t){T.a.post("/auth/login",{},{headers:{"Content-Type":"application/json",idToken:t}}).catch((function(t){e.show("No access!",{timeout:2e3,type:"error"}),console.log(t)}))})).catch((function(t){e.show("Bad token",{timeout:2e3,type:"error"}),console.log(t)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return t?Object(p.jsx)(g.c,{to:"/"}):Object(p.jsxs)("div",{className:"container mt-3 mb-2 text-center",children:[Object(p.jsx)("div",{className:"container mt-2 mb-2",children:Object(p.jsx)("div",{className:"btn btn-lg btn-secondary fab fa-google col-3",onClick:function(){return n(Z)},children:"Continue with Google"})}),Object(p.jsx)("div",{className:"container mt-2 mb-2",children:Object(p.jsx)("div",{className:"btn btn-lg btn-secondary fab fa-facebook col-3",onClick:function(){return n(X)},children:"Continue with Facebook"})}),Object(p.jsx)("div",{className:"container mt-2 mb-2",children:Object(p.jsx)("div",{className:"btn btn-lg btn-secondary fab fa-github col-3",onClick:function(){return n($)},children:"Continue with GitHub"})})]})},ne=n(698),ce=n(141),ae=n.n(ce),re=(n(660),n(705));function se(e){var t=Object(g.k)(),n=Object(c.useContext)(f).currentUser,a=Object(c.useState)([]),r=Object(o.a)(a,2),s=r[0],i=r[1],u=Object(m.b)(),j=Object(c.useState)(!1),l=Object(o.a)(j,2),d=l[0],b=l[1],h=[{dataField:"id",text:"Task id",sort:!0},{dataField:"title",text:"Title",sort:!0,filter:Object(ce.textFilter)()},{dataField:"theme",text:"Theme",sort:!0,filter:Object(ce.textFilter)()}];Object(c.useEffect)((function(){function t(){return t=Object(w.a)(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getIdToken(!0).then(function(){var t=Object(w.a)(k.a.mark((function t(n){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.a.get("/task/getUserTasks",{headers:{"Content-Type":"application/json",idToken:n},params:{uid:e.uid}}).then((function(e){i(e.data)})).catch((function(e){u.show("No access!",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){u.show("Bad token",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}(function(){return t.apply(this,arguments)})().catch((function(e){console.log(e)}))}),[e,u,n]);var O={renderer:function(e){return Object(p.jsxs)("div",{children:[Object(p.jsx)(A.a,{className:"mx-1",onClick:function(){return t.push("/task/"+e.id+"/edit")},children:"Edit"}),Object(p.jsx)(A.a,{className:"mx-1",onClick:function(){return t.push("/task/"+e.id)},children:"View"}),Object(p.jsx)(A.a,{variant:"danger",className:"mx-1",onClick:function(){return b(!0)},children:"Delete"}),Object(p.jsxs)(re.a,{show:d,onHide:function(){return b(!1)},children:[Object(p.jsx)(re.a.Header,{closeButton:!0,children:Object(p.jsx)(re.a.Title,{children:"Delete task"})}),Object(p.jsx)(re.a.Body,{children:"Are you sure you want to delete the task?"}),Object(p.jsxs)(re.a.Footer,{children:[Object(p.jsx)(A.a,{variant:"secondary",onClick:function(){return b(!1)},children:"Close"}),Object(p.jsx)(A.a,{variant:"danger",onClick:function(){return b(!1)},children:"Delete"})]})]})]})}};return Object(p.jsx)("div",{children:s.length?Object(p.jsx)("div",{className:"container mt-5",children:Object(p.jsx)(J.a,{striped:!0,hover:!0,keyField:"id",data:s,columns:h,filter:ae()(),expandRow:O,pagination:Q()({sizePerPage:5,hideSizePerPage:!0})})}):Object(p.jsx)("div",{})})}function oe(){var e=Object(c.useContext)(f).currentUser,t=Object(c.useState)([]),n=Object(o.a)(t,2),a=n[0],r=n[1],s=Object(g.m)().uid,i=Object(m.b)();return Object(c.useEffect)((function(){function t(){return t=Object(w.a)(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getIdToken(!0).then(function(){var e=Object(w.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("/admin/getProfile",{headers:{"Content-Type":"application/json",idToken:t},params:{uid:s}}).then((function(e){r(e.data)})).catch((function(e){i.show("No access!",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){i.show("Bad token",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}(function(){return t.apply(this,arguments)})().catch((function(e){console.log(e)}))}),[s,e,i]),a?Object(p.jsxs)(u.a,{className:"mt-2",children:[Object(p.jsxs)(D.a,{children:[Object(p.jsx)(D.a.Header,{children:Object(p.jsx)(D.a.Title,{as:"h2",children:a.username})}),Object(p.jsx)(D.a.Body,{children:Object(p.jsxs)(ne.a,{variant:"flush",children:[Object(p.jsxs)(ne.a.Item,{as:"h5",children:["Number of tasks created: ",a.createdTasks]}),Object(p.jsxs)(ne.a.Item,{as:"h5",children:["Number of solved tasks: ",a.solvedTasks]})]})})]}),a.uid?Object(p.jsx)(se,{uid:a.uid}):Object(p.jsx)(p.Fragment,{children:"Loading..."})]}):Object(p.jsx)("p",{children:"User not found"})}var ie=n(6),ue=n(241),je={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:2,borderColor:"#eeeeee",borderStyle:"dashed",backgroundColor:"#fafafa",color:"#bdbdbd",outline:"none",transition:"border .24s ease-in-out"},le={borderColor:"#2196f3"},de={borderColor:"#00e676"},be={borderColor:"#ff1744"};function he(e){var t=e.getImages;var n=Object(ue.a)({maxFiles:3,validator:function(e){return["image/bmp","image/jpeg","image/jpg","image/png"].includes(e.type)?null:{code:"wrong-type",message:"Images only"}}}),a=n.acceptedFiles,r=n.fileRejections,s=n.getRootProps,o=n.getInputProps,i=n.isDragActive,u=n.isDragAccept,j=n.isDragReject,l=a.map((function(e){return Object(p.jsxs)("li",{children:[e.path," - ",e.size," bytes"]},e.path)})),d=r.map((function(e){var t=e.file,n=e.errors;return Object(p.jsxs)("li",{children:[t.path," - ",t.size," bytes",Object(p.jsx)("ul",{children:n.map((function(e){return Object(p.jsx)("li",{children:e.message},e.code)}))})]},t.path)})),b=Object(c.useMemo)((function(){return Object(ie.a)(Object(ie.a)(Object(ie.a)(Object(ie.a)({},je),i?le:{}),u?de:{}),j?be:{})}),[i,j,u]);return Object(c.useEffect)((function(){t(a)}),[t,a]),Object(p.jsxs)("section",{className:"container mt-2",children:[Object(p.jsx)("h4",{children:"Add images"}),Object(p.jsxs)("div",Object(ie.a)(Object(ie.a)({},s({style:b})),{},{children:[Object(p.jsx)("input",Object(ie.a)({},o())),Object(p.jsx)("p",{children:"Drag 'n' drop some files here, or click to select files"}),Object(p.jsx)("em",{children:"(3 files are the maximum number of files you can drop here)"})]})),Object(p.jsxs)("aside",{className:"mt-2",children:[Object(p.jsx)("h5",{children:"Accepted files"}),Object(p.jsx)("ul",{children:l}),Object(p.jsx)("h5",{children:"Rejected files"}),Object(p.jsx)("ul",{children:d})]})]})}function pe(e){var t=e.getCondition,n=Object(c.useState)("**Condition here**"),a=Object(o.a)(n,2),r=a[0],s=a[1];return Object(c.useEffect)((function(){t(r)}),[t,r]),Object(p.jsxs)("div",{className:"container mt-3",children:[Object(p.jsx)("h4",{children:"Set condition"}),Object(p.jsx)(H.a,{value:r,onChange:s})]})}var fe=n(707),Oe=n(240),xe=(n(680),n(681),Object(d.d)(h));function me(e){var t=e.getTitle,n=e.getTheme,a=e.getTags,r=Object(c.useState)(""),s=Object(o.a)(r,2),i=s[0],u=s[1],j=Object(c.useState)(""),l=Object(o.a)(j,2),d=l[0],b=l[1],h=Object(c.useState)([]),f=Object(o.a)(h,2),O=f[0],x=f[1],g=Object(c.useState)([]),v=Object(o.a)(g,2),y=v[0],C=v[1],S=Object(c.useState)([]),N=Object(o.a)(S,2),I=N[0],F=N[1],E=Object(m.b)();Object(c.useEffect)((function(){t(i)}),[t,i]),Object(c.useEffect)((function(){n(d)}),[d,n]),Object(c.useEffect)((function(){a(O)}),[a,O]),Object(c.useEffect)((function(){function e(){return e=Object(w.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe.currentUser.getIdToken(!0).then(function(){var e=Object(w.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("/task/utils/getAllTagNames",{headers:{"Content-Type":"application/json",idToken:t}}).then((function(e){C(e.data)})).catch((function(e){E.show("No access!",{timeout:2e3,type:"error"}),console.log(e)}));case 2:return e.next=4,T.a.get("/task/utils/getAllThemes",{headers:{"Content-Type":"application/json",idToken:t}}).then((function(e){F(e.data),b(e.data[0])})).catch((function(e){E.show("No access!",{timeout:2e3,type:"error"}),console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){E.show("Bad token",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}(function(){return e.apply(this,arguments)})().catch((function(e){console.log(e)}))}),[E]);var U=function(e){var t=e.value,n=e.options,c=e.onChange;return Object(p.jsx)(P.a.Select,{required:!0,value:t,onChange:c,children:n.map((function(e){return Object(p.jsx)("option",{value:e,children:e},e)}))})};return Object(p.jsxs)(fe.a,{gap:3,className:"container mt-2 mx-auto",children:[Object(p.jsxs)(P.a.Group,{children:[Object(p.jsx)(P.a.Label,{as:"h4",children:"Choose title"}),Object(p.jsx)(P.a.Control,{required:!0,type:"text",placeholder:"Choose a title...",value:i,onChange:function(e){u(e.target.value)}}),Object(p.jsx)(P.a.Control.Feedback,{type:"invalid",children:"Please choose a title."})]}),Object(p.jsxs)(P.a.Group,{children:[Object(p.jsx)(P.a.Label,{as:"h4",children:"Chose theme"}),Object(p.jsx)(U,{value:d,options:I,onChange:function(e){b(e.target.value)}}),Object(p.jsx)(P.a.Control.Feedback,{type:"invalid",children:"Please choose a theme."})]}),Object(p.jsxs)(P.a.Group,{children:[Object(p.jsx)(P.a.Label,{as:"h4",children:"Choose tags"}),Object(p.jsx)(Oe.a,{clearButton:!0,allowNew:!0,id:"tags",labelKey:"name",multiple:!0,onChange:x,options:y,placeholder:"Choose tags...",selected:O})]})]})}var ge=n(17),ve=n(699),ke=n(700);function we(e){var t=e.getAnswer,n=Object(c.useState)([{answer:""}]),a=Object(o.a)(n,2),r=a[0],s=a[1];Object(c.useEffect)((function(){t(r)}),[t,r]);var i=function(){var e=Object(ge.a)(r);e.length<3&&(e.push({answer:""}),s(e))},u=function(e){var t=Object(ge.a)(r);t.length>1&&(t.splice(e,1),s(t))},j=function(e,t){var n=Object(ge.a)(r);n[e].answer=t.target.value,s(n)};return Object(p.jsxs)(P.a.Group,{className:"container mt-2",children:[Object(p.jsx)(P.a.Label,{children:Object(p.jsx)("h4",{children:"Set answers"})}),r.map((function(e,t){return Object(p.jsx)(c.Fragment,{children:Object(p.jsxs)(ve.a,{className:"mt-2",children:[Object(p.jsxs)(L.a,{md:10,children:[Object(p.jsx)(P.a.Control,{required:!0,type:"text",placeholder:"Answer",value:e.answer,onChange:function(e){return j(t,e)}}),Object(p.jsx)(P.a.Control.Feedback,{type:"invalid",children:"Please set a answer."})]}),Object(p.jsx)(L.a,{md:2,children:Object(p.jsxs)(ke.a,{children:[Object(p.jsx)(A.a,{variant:"secondary",onClick:function(){return u(t)},children:"-"}),Object(p.jsx)(A.a,{variant:"secondary",onClick:function(){return i()},children:"+"})]})})]})},"".concat(e,"~").concat(t))}))]})}var ye=Object(R.b)(),Ce=function(e){var t=e.mode,n=void 0===t?"create":t,a=Object(g.k)(),r=(new Date).getTime(),s=Object(c.useContext)(f).currentUser,i=Object(c.useState)(""),u=Object(o.a)(i,2),j=u[0],l=u[1],d=Object(c.useState)(""),b=Object(o.a)(d,2),h=b[0],O=b[1],x=Object(c.useState)(null),v=Object(o.a)(x,2),y=v[0],C=v[1],S=Object(c.useState)(null),N=Object(o.a)(S,2),I=N[0],F=N[1],E=Object(c.useState)(null),L=Object(o.a)(E,2),D=L[0],B=L[1],z=Object(c.useState)([]),G=Object(o.a)(z,2),H=G[0],V=G[1],M=Object(c.useState)(!1),Y=Object(o.a)(M,2),q=Y[0],J=Y[1],K=Object(m.b)(),Q=Object(c.useCallback)((function(e){l(e)}),[]),W=Object(c.useCallback)((function(e){O(e)}),[]),_=Object(c.useCallback)((function(e){C(e)}),[]),Z=Object(c.useCallback)((function(e){F(e)}),[]),X=Object(c.useCallback)((function(e){V(e)}),[]),$=Object(c.useCallback)((function(e){B(e)}),[]),ee=function(e,t){return new Promise((function(n,c){var a=Object(R.c)(ye,"/".concat(s.uid,"/").concat(e,"/").concat(t.name)),r=Object(R.d)(a,t),o=c;r.on("state_changed",(function(){}),o,(function(){Object(R.a)(r.snapshot.ref).then(n).catch(c)}))}))};function te(){return ne.apply(this,arguments)}function ne(){return(ne=Object(w.a)(k.a.mark((function e(){var t,n,c,o,i,u,l,d,b;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=null,c=[],o=[],i=Object(U.a)(D),e.prev=5,i.s();case 7:if((u=i.n()).done){e.next=13;break}return l=u.value,e.next=11,ee("Images",l).then((function(e){t.push(e)}));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),i.e(e.t0);case 18:return e.prev=18,i.f(),e.finish(18);case 21:return d=new File([I],"".concat(r,".md"),{type:"text/markdown"}),e.next=24,ee("Conditions",d).then((function(e){n=e}));case 24:return y.forEach((function(e){e.substring?c.push(e):c.push(e.name)})),H.forEach((function(e){o.push(e.answer)})),b={title:j,theme:h,tags:c,conditionURL:n,images:t,answers:o},console.log(b),e.next=30,s.getIdToken(!0).then((function(e){T.a.post("/task/create",b,{headers:{"Content-Type":"application/json",idToken:e}}).then((function(){a.push("/home"),K.show("Successfully created!",{timeout:2e3,type:"success"})})).catch((function(e){K.show("No access!",{timeout:2e3,type:"error"}),console.log(e)}))})).catch((function(e){K.show("Bad token",{timeout:2e3,type:"error"}),console.log(e)}));case 30:case"end":return e.stop()}}),e,null,[[5,15,18,21]])})))).apply(this,arguments)}var ce=function(){var e=Object(w.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.currentTarget,t.preventDefault(),!1!==n.checkValidity()){e.next=7;break}J(!0),t.stopPropagation(),e.next=9;break;case 7:return e.next=9,te();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(w.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),K.show("Soon",{timeout:2e3,type:"info"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(P.a,{className:"col-md-8 mt-2 mx-auto",noValidate:!0,validated:q,onSubmit:"create"===n?ce:ae,children:[Object(p.jsx)("h2",{className:"text-center",children:"create"===n?"Create new task":"Edit task"}),Object(p.jsx)(me,{getTitle:Q,getTheme:W,getTags:_}),Object(p.jsx)(pe,{getCondition:Z}),Object(p.jsx)(we,{getAnswer:X}),Object(p.jsx)(he,{getImages:$}),Object(p.jsx)("div",{className:"d-grid gap-2",children:Object(p.jsx)(A.a,{variant:"primary",size:"lg",type:"submit",children:"create"===n?"Create":"Edit"})})]})},Te=n(235),Se=n(701);function Ne(e){var t=e.taskId,n=e.answers,a=e.solved,r=e.getSolved,s=Object(c.useContext)(f).currentUser,i=Object(c.useState)(""),u=Object(o.a)(i,2),j=u[0],l=u[1],d=Object(m.b)(),b=function(){var e=Object(w.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.getIdToken(!0).then(function(){var e=Object(w.a)(k.a.mark((function e(n){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.post("/task/utils/currentAnswer",t,{headers:{"Content-Type":"application/json",idToken:n}}).catch((function(e){d.show("No access!",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){d.show("Bad token",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(w.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!a){e.next=5;break}d.show("The task has already been solved!",{timeout:2e3,type:"info"}),e.next=13;break;case 5:if(!n.includes(j)){e.next=12;break}return d.show("Correct answer!",{timeout:2e3,type:"success"}),e.next=9,b();case 9:r(!0),e.next=13;break;case 12:d.show("Wrong answer!",{timeout:2e3,type:"error"});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(P.a,{className:"col-md-5 mx-auto",onSubmit:h,children:[Object(p.jsxs)(P.a.Group,{children:[Object(p.jsx)(P.a.Label,{as:"h4",children:"Your answer:"}),Object(p.jsx)(P.a.Control,{className:"mt-3",required:!0,type:"text",placeholder:"Enter your answer...",value:j,onChange:function(e){l(e.target.value)}})]}),Object(p.jsx)(A.a,{className:"mt-3 mb-3",variant:"primary",size:"lg",type:"submit",children:"Check"})]})}function Ie(e){var t=e.mode,n=void 0===t?"view":t,a=Object(c.useState)(0),r=Object(o.a)(a,2),s=r[0],i=r[1],j=Object(c.useState)(!1),l=Object(o.a)(j,2),d=l[0],b=l[1],h=Object(c.useContext)(f).currentUser,O=Object(c.useState)([]),x=Object(o.a)(O,2),v=x[0],y=x[1],C=Object(c.useState)(""),S=Object(o.a)(C,2),N=S[0],I=S[1],F=Object(c.useState)([]),E=Object(o.a)(F,2),U=E[0],P=E[1],A=Object(c.useState)([]),R=Object(o.a)(A,2),z=R[0],M=R[1],Y=Object(g.m)().taskId,q=Object(m.b)(),J=Object(c.useState)(!1),K=Object(o.a)(J,2),Q=K[0],W=K[1],_=Object(c.useCallback)((function(e){W(e)}),[]);function Z(e){return X.apply(this,arguments)}function X(){return X=Object(w.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.getIdToken(!0).then(function(){var e=Object(w.a)(k.a.mark((function e(n){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.post("/task/utils/addRating",[],{headers:{"Content-Type":"application/json",idToken:n},params:{taskId:Y,rating:t}}).catch((function(e){q.show("No access!",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){q.show("Bad token",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),X.apply(this,arguments)}Object(c.useEffect)((function(){function e(){return e=Object(w.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.getIdToken(!0).then(function(){var e=Object(w.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("/task/getTask",{headers:{"Content-Type":"application/json",idToken:t},params:{taskId:Y}}).then(function(){var e=Object(w.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G(t.data.conditionURL).then((function(e){I(e)}));case 2:y(t.data),M(t.data.tags),P(t.data.images),i(t.data.rating);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){q.show("No access!",{timeout:2e3,type:"error"}),console.log(e)}));case 2:return e.next=4,T.a.get("/task/utils/checkSolvedTask",{headers:{"Content-Type":"application/json",idToken:t},params:{taskId:Y}}).then((function(e){W(e.data)})).catch((function(e){q.show("No access!",{timeout:2e3,type:"error"}),console.log(e)}));case 4:return e.next=6,T.a.get("/task/utils/checkTaskRated",{headers:{"Content-Type":"application/json",idToken:t},params:{taskId:Y}}).then((function(e){b(e.data)})).catch((function(e){q.show("No access!",{timeout:2e3,type:"error"}),console.log(e)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){q.show("Bad token",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}(function(){return e.apply(this,arguments)})().catch((function(e){console.log(e)}))}),[q,h,Y]);var $=function(){var e=Object(w.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=7;break}return i(t),b(!0),e.next=5,Z(t);case 5:e.next=8;break;case 7:q.show("You have already set a rating",{timeout:2e3,type:"error"});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)(u.a,{className:" mt-2 mx-auto text-center",children:Object(p.jsxs)(D.a,{children:[Object(p.jsxs)(D.a.Header,{children:[Object(p.jsx)(D.a.Title,{as:"h2",children:v.title}),d||"view"!==n?Object(p.jsx)(V.RatingView,{ratingValue:s}):Object(p.jsx)(V.Rating,{onClick:$,ratingValue:s}),Object(p.jsx)(D.a.Subtitle,{className:"text-muted",children:v.theme}),z.map((function(e,t){return Object(p.jsx)(B.a,{bg:"primary",className:"mx-1",children:e},t)}))]}),Object(p.jsx)(D.a.Body,{children:Object(p.jsxs)(ne.a,{className:"list-group-flush",children:[Object(p.jsx)(Te.a,{children:Object(p.jsx)(H.a.Markdown,{source:N})}),Object(p.jsx)(Te.a,{children:Object(p.jsx)(ve.a,{children:U.map((function(e,t){return Object(p.jsx)(L.a,{children:Object(p.jsx)(Se.a,{src:e,rounded:!0,width:"300"})},t)}))})})]})}),"edit"===n?Object(p.jsxs)("div",{children:[Object(p.jsx)("h4",{children:"Answers:"}),v.answers?v.answers.map((function(e,t){return Object(p.jsx)("div",{children:e},t)})):Object(p.jsx)("div",{})]}):Object(p.jsx)(Ne,{taskId:v.id,answers:v.answers,solved:Q,getSolved:_})]})})}var Fe=n(12),Ee=["component"],Ue=function(e){var t=e.component,n=Object(Fe.a)(e,Ee),a=Object(c.useContext)(f).currentUser;return Object(p.jsx)(g.d,Object(ie.a)(Object(ie.a)({},n),{},{render:function(e){return a?Object(p.jsx)(t,Object(ie.a)({},e)):Object(p.jsx)(g.c,{to:"/login"})}}))};function Le(){return Object(p.jsx)(u.a,{children:Object(p.jsxs)(ve.a,{children:[Object(p.jsx)(L.a,{children:Object(p.jsx)(Ie,{mode:"edit"})}),Object(p.jsx)(L.a,{children:Object(p.jsx)(Ce,{mode:"edit"})})]})})}var Pe=function(){return Object(p.jsx)(x,{children:Object(p.jsxs)(I.HashRouter,{children:[Object(p.jsx)(N,{}),Object(p.jsxs)(g.g,{children:[Object(p.jsx)(g.d,{exact:!0,path:"/home",component:Y}),Object(p.jsx)(g.d,{exact:!0,path:"/",component:Y}),Object(p.jsx)(Ue,{exact:!0,path:"/admin",component:_}),Object(p.jsx)(g.d,{exact:!0,path:"/login",component:te}),Object(p.jsx)(Ue,{exact:!0,path:"/task/create",component:Ce}),Object(p.jsx)(g.d,{exact:!0,path:"/profile/:uid",component:oe}),Object(p.jsx)(g.d,{exact:!0,path:"/task/:taskId",component:Ie}),Object(p.jsx)(g.d,{exact:!0,path:"/task/:taskId/edit",component:Le})]})]})})},De=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,708)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))},Be=(n(682),n(239));s.a.render(Object(p.jsx)(m.a,{template:Be.a,children:Object(p.jsxs)(I.HashRouter,{children:[Object(p.jsx)(Pe,{}),","]})}),document.getElementById("root")),De()}},[[683,1,2]]]);
//# sourceMappingURL=main.97c8508d.chunk.js.map