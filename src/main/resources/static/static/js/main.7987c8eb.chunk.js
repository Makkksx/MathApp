(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{624:function(e,t,n){},626:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(36),s=n.n(r),o=n(15),i=n(645),u=n(638),j=n(648),l=n(57),b=n(44),d=n(186),h=Object(d.a)({apiKey:"AIzaSyAZCTYk0aTKjj0d8ihntd_GuzdodUT4RVQ",authDomain:"poised-cathode-325720.firebaseapp.com",projectId:"poised-cathode-325720",storageBucket:"poised-cathode-325720.appspot.com",messagingSenderId:"286350985232",appId:"1:286350985232:web:bbd8c1efc44e336bd06295",measurementId:"G-LHMQMJVMPJ"}),p=n(1),f=a.a.createContext(),O=Object(b.d)(h),x=function(e){var t=e.children,n=Object(c.useState)(null),a=Object(o.a)(n,2),r=a[0],s=a[1],i=Object(c.useState)(!0),u=Object(o.a)(i,2),j=u[0],l=u[1];return Object(c.useEffect)((function(){O.onAuthStateChanged((function(e){s(e),l(!1)}))}),[]),j?Object(p.jsx)(p.Fragment,{children:"Loading..."}):Object(p.jsx)(f.Provider,{value:{currentUser:r},children:t})},m=n(26),g=n(29);function v(){var e=Object(g.k)(),t=Object(c.useContext)(f).currentUser,n=Object(c.useState)(!1),a=Object(o.a)(n,2),r=a[0],s=a[1],d=Object(m.b)();Object(c.useEffect)((function(){t?t.getIdTokenResult().then((function(e){e.claims.admin&&!r&&s(!0)})).catch((function(e){d.show("Bad token",{timeout:2e3,type:"error"}),console.log(e)})):s(!1)}),[t,r,d]);return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(i.a,{bg:"light",expand:"lg",children:Object(p.jsxs)(u.a,{children:[Object(p.jsx)(l.LinkContainer,{to:"/",children:Object(p.jsx)(i.a.Brand,{children:"MathApp"})}),Object(p.jsx)(i.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(p.jsxs)(i.a.Collapse,{id:"basic-navbar-nav",children:[Object(p.jsxs)(j.a,{className:"me-auto",children:[Object(p.jsx)(l.LinkContainer,{to:"/home",children:Object(p.jsx)(j.a.Link,{children:"Home"})}),r?Object(p.jsx)(l.LinkContainer,{to:"/admin",children:Object(p.jsx)(j.a.Link,{children:"Admin"})}):Object(p.jsx)("div",{}),t?Object(p.jsx)(l.LinkContainer,{to:"/createTask",children:Object(p.jsx)(j.a.Link,{children:"Create task"})}):Object(p.jsx)("div",{})]}),Object(p.jsx)(j.a,{children:t?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(l.LinkContainer,{to:"/profile/"+t.uid,children:Object(p.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Profile"})}),Object(p.jsx)("button",{className:"btn btn-primary mx-2",onClick:function(){Object(b.d)().signOut().then((function(){return e.push("/home")}))},type:"submit",children:"Sign-out"})]}):Object(p.jsx)(l.LinkContainer,{to:"/login",children:Object(p.jsx)("button",{className:"btn btn-primary mx-2",type:"submit",children:"Sign-up"})})})]})]})})})}var k=n(35),w=n(2),y=n.n(w),C=n(5),T=n(189),S=n(24),N=n.n(S);function I(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(m.b)();return Object(c.useEffect)((function(){function e(){return(e=Object(C.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/task/getAllTags").then((function(e){a(e.data)})).catch((function(e){r.show("No access!",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return e.apply(this,arguments)})().catch((function(e){console.log(e)}))}),[r]),Object(p.jsx)(T.TagCloud,{minSize:12,maxSize:35,tags:n})}var F=n(31),L=n(194),U=n(646),E=n(647),A=n(639),B=n(640),P=n(58),R=Object(P.b)(),D=function(e){return new Promise((function(t,n){Object(P.a)(Object(P.c)(R,e)).then(function(){var e=Object(C.a)(y.a.mark((function e(c){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get(c).then((function(e){t(e.data)})).catch((function(e){n(new Error("No access!")),console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))},G=n(77),z=n(106);function H(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(m.b)(),s=Object(c.useState)("dateUp"),i=Object(o.a)(s,2),j=i[0],b=i[1],d=Object(c.useState)(!0),h=Object(o.a)(d,2),O=h[0],x=h[1],g=Object(c.useContext)(f).currentUser;if(Object(c.useEffect)((function(){function e(){return e=Object(C.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/task/getAllTasks").then(function(){var e=Object(C.a)(y.a.mark((function e(t){var n,c,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(F.a)(t.data),e.prev=1,r=y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.value,e.next=3,D(t.conditionURL).then((function(e){t.condition=e}));case 3:case"end":return e.stop()}}),e)})),n.s();case 4:if((c=n.n()).done){e.next=8;break}return e.delegateYield(r(),"t0",6);case 6:e.next=4;break;case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(1),n.e(e.t1);case 13:return e.prev=13,n.f(),e.finish(13);case 16:a(t.data.sort((function(e,t){return t.id-e.id}))),x(!1);case 18:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){r.show("No access!",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}(function(){return e.apply(this,arguments)})().catch((function(e){console.log(e)}))}),[r]),O)return Object(p.jsx)(p.Fragment,{children:"Loading..."});return Object(p.jsxs)(u.a,{className:"mt-2",children:[Object(p.jsx)(L.a,{md:3,className:"text-end",children:Object(p.jsxs)(U.a.Select,{value:j,onChange:function(e){b(e.target.value),"dateUp"===e.target.value?a(n.sort((function(e,t){return t.id-e.id}))):"ratingUp"===e.target.value?a(n.sort((function(e,t){return t.rating-e.rating}))):"dateDown"===e.target.value?a(n.sort((function(e,t){return e.id-t.id}))):"ratingDown"===e.target.value&&a(n.sort((function(e,t){return e.rating-t.rating})))},children:[Object(p.jsx)("option",{value:"dateUp",children:"Sort by date (recent first)"}),Object(p.jsx)("option",{value:"dateDown",children:"Sort by date (recent first)"}),Object(p.jsx)("option",{value:"ratingUp",children:"Sort by rating (high first)"}),Object(p.jsx)("option",{value:"ratingDown",children:"Sort by rating (high first)"})]})}),n.map((function(e,t){return Object(p.jsxs)(E.a,{className:"mt-2",children:[Object(p.jsxs)(E.a.Header,{children:[Object(p.jsx)(E.a.Title,{as:"h2",children:e.title}),Object(p.jsx)(z.RatingView,{ratingValue:e.rating}),Object(p.jsx)(E.a.Subtitle,{className:"text-muted",children:e.theme}),e.tags.map((function(e,t){return Object(p.jsx)(A.a,{bg:"primary",className:"mx-1",children:e},t)}))]}),Object(p.jsxs)(E.a.Body,{children:[Object(p.jsx)(G.a.Markdown,{source:e.condition}),g?Object(p.jsx)(l.LinkContainer,{to:"/task/"+e.id,children:Object(p.jsx)(B.a,{className:"mt-2",children:"Go to task"})}):Object(p.jsx)("div",{})]})]},t)}))]})}var M=function(){return Object(p.jsxs)("div",{className:"container mt-3 text-center",children:[Object(p.jsx)(I,{}),Object(p.jsx)(H,{})]})},V=n(107),Y=n.n(V),q=n(649);function J(){var e=Object(c.useContext)(f).currentUser,t=Object(c.useState)([]),n=Object(o.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(1),i=Object(o.a)(s,2),u=i[0],j=i[1],l=Object(m.b)(),b=Object(g.k)(),d={onClick:function(e,t,n){b.push("/profile/"+t.uid)}};Object(c.useEffect)((function(){e?e.getIdToken(!0).then(function(){var e=Object(C.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/admin/getAll",{headers:{"Content-Type":"application/json",idToken:t}}).then((function(e){r(e.data)})).catch((function(e){l.show("You are not an admin!",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){l.show("No access!",{timeout:2e3,type:"error"}),console.log(e)})):l.show("Please login to view",{timeout:2e3,type:"error"})}),[l,e]);for(var h=Object(c.useMemo)((function(){var e=5*(u-1),t=e+5;return a.slice(e,t)}),[u,a]),O=[],x=function(e){O.push(Object(p.jsx)(q.a.Item,{active:e===u,onClick:function(){return j(e)},children:e},e))},v=1;v<=(a.length/5|0);v++)x(v);return Object(p.jsxs)("div",{className:"container",style:{marginTop:50},children:[Object(p.jsx)(Y.a,{striped:!0,hover:!0,keyField:"id",data:h,columns:[{dataField:"uid",text:"ID",sort:!0},{dataField:"username",text:"Name",sort:!0},{dataField:"email",text:"Email",sort:!0},{dataField:"provider",text:"Provider",sort:!0}],rowEvents:d}),Object(p.jsx)(q.a,{children:O})]})}var K=function(){return Object(p.jsx)(u.a,{children:Object(p.jsx)(J,{})})},Q=new b.c,W=new b.a,_=new b.b,Z=Object(b.d)(h),X=function(){var e=Object(m.b)(),t=Object(c.useContext)(f).currentUser,n=function(){var t=Object(C.a)(y.a.mark((function t(n){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(b.e)(Z,n);case 2:return t.next=4,Z.currentUser.getIdToken(!0).then((function(t){N.a.post("/auth/login",{},{headers:{"Content-Type":"application/json",idToken:t}}).catch((function(t){e.show("No access!",{timeout:2e3,type:"error"}),console.log(t)}))})).catch((function(t){e.show("Bad token",{timeout:2e3,type:"error"}),console.log(t)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return t?Object(p.jsx)(g.c,{to:"/"}):Object(p.jsxs)("div",{className:"container mt-3 mb-2 text-center",children:[Object(p.jsx)("div",{className:"container mt-2 mb-2",children:Object(p.jsx)("div",{className:"btn btn-lg btn-secondary fab fa-google col-3",onClick:function(){return n(Q)},children:"Continue with Google"})}),Object(p.jsx)("div",{className:"container mt-2 mb-2",children:Object(p.jsx)("div",{className:"btn btn-lg btn-secondary fab fa-facebook col-3",onClick:function(){return n(W)},children:"Continue with Facebook"})}),Object(p.jsx)("div",{className:"container mt-2 mb-2",children:Object(p.jsx)("div",{className:"btn btn-lg btn-secondary fab fa-github col-3",onClick:function(){return n(_)},children:"Continue with GitHub"})})]})},$=n(641);function ee(e){var t=Object(g.k)(),n=Object(c.useContext)(f).currentUser,a=Object(c.useState)([]),r=Object(o.a)(a,2),s=r[0],i=r[1],u=Object(m.b)();Object(c.useEffect)((function(){function t(){return t=Object(C.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getIdToken(!0).then(function(){var t=Object(C.a)(y.a.mark((function t(n){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.get("/task/getUserTasks",{headers:{"Content-Type":"application/json",idToken:n},params:{uid:e.uid}}).then((function(e){i(e.data)})).catch((function(e){u.show("No access!",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){u.show("Bad token",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}(function(){return t.apply(this,arguments)})().catch((function(e){console.log(e)}))}),[e,u,n]);var j={onClick:function(e,n,c){t.push("/task/"+n.id)}};return Object(p.jsx)("div",{children:s.length?Object(p.jsx)("div",{className:"container",style:{marginTop:50},children:Object(p.jsx)(Y.a,{striped:!0,hover:!0,keyField:"id",data:s,columns:[{dataField:"id",text:"Task id",sort:!0},{dataField:"title",text:"Title",sort:!0},{dataField:"theme",text:"Theme",sort:!0}],rowEvents:j})}):Object(p.jsx)("div",{})})}function te(){var e=Object(c.useContext)(f).currentUser,t=Object(c.useState)([]),n=Object(o.a)(t,2),a=n[0],r=n[1],s=Object(g.m)().uid,i=Object(m.b)();return Object(c.useEffect)((function(){function t(){return t=Object(C.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getIdToken(!0).then(function(){var e=Object(C.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/admin/getProfile",{headers:{"Content-Type":"application/json",idToken:t},params:{uid:s}}).then((function(e){r(e.data)})).catch((function(e){i.show("No access!",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){i.show("Bad token",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}(function(){return t.apply(this,arguments)})().catch((function(e){console.log(e)}))}),[s,e,i]),a?Object(p.jsxs)(u.a,{className:"mt-2",children:[Object(p.jsxs)(E.a,{children:[Object(p.jsx)(E.a.Header,{children:Object(p.jsx)(E.a.Title,{as:"h2",children:a.username})}),Object(p.jsx)(E.a.Body,{children:Object(p.jsxs)($.a,{variant:"flush",children:[Object(p.jsxs)($.a.Item,{as:"h5",children:["Number of tasks created: ",a.createdTasks]}),Object(p.jsxs)($.a.Item,{as:"h5",children:["Number of solved tasks: ",a.solvedTasks]})]})})]}),a.uid?Object(p.jsx)(ee,{uid:a.uid}):Object(p.jsx)(p.Fragment,{children:"Loading..."})]}):Object(p.jsx)("p",{children:"User not found"})}var ne=n(6),ce=n(201),ae={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:2,borderColor:"#eeeeee",borderStyle:"dashed",backgroundColor:"#fafafa",color:"#bdbdbd",outline:"none",transition:"border .24s ease-in-out"},re={borderColor:"#2196f3"},se={borderColor:"#00e676"},oe={borderColor:"#ff1744"};function ie(e){var t=e.getImages;var n=Object(ce.a)({maxFiles:2,validator:function(e){return["image/bmp","image/jpeg","image/jpg","image/png"].includes(e.type)?null:{code:"wrong-type",message:"Images only"}}}),a=n.acceptedFiles,r=n.fileRejections,s=n.getRootProps,o=n.getInputProps,i=n.isDragActive,u=n.isDragAccept,j=n.isDragReject,l=a.map((function(e){return Object(p.jsxs)("li",{children:[e.path," - ",e.size," bytes"]},e.path)})),b=r.map((function(e){var t=e.file,n=e.errors;return Object(p.jsxs)("li",{children:[t.path," - ",t.size," bytes",Object(p.jsx)("ul",{children:n.map((function(e){return Object(p.jsx)("li",{children:e.message},e.code)}))})]},t.path)})),d=Object(c.useMemo)((function(){return Object(ne.a)(Object(ne.a)(Object(ne.a)(Object(ne.a)({},ae),i?re:{}),u?se:{}),j?oe:{})}),[i,j,u]);return Object(c.useEffect)((function(){t(a)}),[t,a]),Object(p.jsxs)("section",{className:"container mt-2",children:[Object(p.jsx)("h4",{children:"Add images"}),Object(p.jsxs)("div",Object(ne.a)(Object(ne.a)({},s({style:d})),{},{children:[Object(p.jsx)("input",Object(ne.a)({},o())),Object(p.jsx)("p",{children:"Drag 'n' drop some files here, or click to select files"}),Object(p.jsx)("em",{children:"(3 files are the maximum number of files you can drop here)"})]})),Object(p.jsxs)("aside",{className:"mt-2",children:[Object(p.jsx)("h5",{children:"Accepted files"}),Object(p.jsx)("ul",{children:l}),Object(p.jsx)("h5",{children:"Rejected files"}),Object(p.jsx)("ul",{children:b})]})]})}function ue(e){var t=e.getCondition,n=Object(c.useState)("**Condition here**"),a=Object(o.a)(n,2),r=a[0],s=a[1];return Object(c.useEffect)((function(){t(r)}),[t,r]),Object(p.jsxs)("div",{className:"container mt-3",children:[Object(p.jsx)("h4",{children:"Set condition"}),Object(p.jsx)(G.a,{value:r,onChange:s})]})}var je=n(650),le=n(200),be=(n(623),n(624),Object(b.d)(h));function de(e){var t=e.getTitle,n=e.getTheme,a=e.getTags,r=Object(c.useState)(""),s=Object(o.a)(r,2),i=s[0],u=s[1],j=Object(c.useState)(""),l=Object(o.a)(j,2),b=l[0],d=l[1],h=Object(c.useState)([]),f=Object(o.a)(h,2),O=f[0],x=f[1],g=Object(c.useState)([]),v=Object(o.a)(g,2),k=v[0],w=v[1],T=Object(c.useState)([]),S=Object(o.a)(T,2),I=S[0],F=S[1],L=Object(m.b)();Object(c.useEffect)((function(){t(i)}),[t,i]),Object(c.useEffect)((function(){n(b)}),[b,n]),Object(c.useEffect)((function(){a(O)}),[a,O]),Object(c.useEffect)((function(){function e(){return e=Object(C.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.currentUser.getIdToken(!0).then(function(){var e=Object(C.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/task/getAllTagNames",{headers:{"Content-Type":"application/json",idToken:t}}).then((function(e){w(e.data)})).catch((function(e){L.show("No access!",{timeout:2e3,type:"error"}),console.log(e)}));case 2:return e.next=4,N.a.get("/task/getAllThemes",{headers:{"Content-Type":"application/json",idToken:t}}).then((function(e){F(e.data),d(e.data[0])})).catch((function(e){L.show("No access!",{timeout:2e3,type:"error"}),console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){L.show("Bad token",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}(function(){return e.apply(this,arguments)})().catch((function(e){console.log(e)}))}),[L]);var E=function(e){var t=e.value,n=e.options,c=e.onChange;return Object(p.jsx)(U.a.Select,{required:!0,value:t,onChange:c,children:n.map((function(e){return Object(p.jsx)("option",{value:e,children:e},e)}))})};return Object(p.jsxs)(je.a,{gap:3,className:"container mt-2 mx-auto",children:[Object(p.jsxs)(U.a.Group,{children:[Object(p.jsx)(U.a.Label,{as:"h4",children:"Choose title"}),Object(p.jsx)(U.a.Control,{required:!0,type:"text",placeholder:"Choose a title...",value:i,onChange:function(e){u(e.target.value)}}),Object(p.jsx)(U.a.Control.Feedback,{type:"invalid",children:"Please choose a title."})]}),Object(p.jsxs)(U.a.Group,{children:[Object(p.jsx)(U.a.Label,{as:"h4",children:"Chose theme"}),Object(p.jsx)(E,{value:b,options:I,onChange:function(e){d(e.target.value)}}),Object(p.jsx)(U.a.Control.Feedback,{type:"invalid",children:"Please choose a theme."})]}),Object(p.jsxs)(U.a.Group,{children:[Object(p.jsx)(U.a.Label,{as:"h4",children:"Choose tags"}),Object(p.jsx)(le.a,{clearButton:!0,allowNew:!0,id:"tags",labelKey:"name",multiple:!0,onChange:x,options:k,placeholder:"Choose tags...",selected:O})]})]})}var he=n(17),pe=n(642),fe=n(643);function Oe(e){var t=e.getAnswer,n=Object(c.useState)([{answer:""}]),a=Object(o.a)(n,2),r=a[0],s=a[1];Object(c.useEffect)((function(){t(r)}),[t,r]);var i=function(){var e=Object(he.a)(r);e.length<3&&(e.push({answer:""}),s(e))},u=function(e){var t=Object(he.a)(r);t.length>1&&(t.splice(e,1),s(t))},j=function(e,t){var n=Object(he.a)(r);n[e].answer=t.target.value,s(n)};return Object(p.jsxs)(U.a.Group,{className:"container mt-2",children:[Object(p.jsx)(U.a.Label,{children:Object(p.jsx)("h4",{children:"Set answers"})}),r.map((function(e,t){return Object(p.jsx)(c.Fragment,{children:Object(p.jsxs)(pe.a,{className:"mt-2",children:[Object(p.jsxs)(L.a,{md:10,children:[Object(p.jsx)(U.a.Control,{required:!0,type:"text",placeholder:"Answer",value:e.answer,onChange:function(e){return j(t,e)}}),Object(p.jsx)(U.a.Control.Feedback,{type:"invalid",children:"Please set a answer."})]}),Object(p.jsx)(L.a,{md:2,children:Object(p.jsxs)(fe.a,{children:[Object(p.jsx)(B.a,{variant:"secondary",onClick:function(){return u(t)},children:"-"}),Object(p.jsx)(B.a,{variant:"secondary",onClick:function(){return i()},children:"+"})]})})]})},"".concat(e,"~").concat(t))}))]})}var xe=Object(P.b)(),me=function(){var e=Object(g.k)(),t=(new Date).getTime(),n=Object(c.useContext)(f).currentUser,a=Object(c.useState)(""),r=Object(o.a)(a,2),s=r[0],i=r[1],u=Object(c.useState)(""),j=Object(o.a)(u,2),l=j[0],b=j[1],d=Object(c.useState)(null),h=Object(o.a)(d,2),O=h[0],x=h[1],v=Object(c.useState)(null),k=Object(o.a)(v,2),w=k[0],T=k[1],S=Object(c.useState)(null),I=Object(o.a)(S,2),L=I[0],E=I[1],A=Object(c.useState)([]),R=Object(o.a)(A,2),D=R[0],G=R[1],z=Object(c.useState)(!1),H=Object(o.a)(z,2),M=H[0],V=H[1],Y=Object(m.b)(),q=Object(c.useCallback)((function(e){i(e)}),[]),J=Object(c.useCallback)((function(e){b(e)}),[]),K=Object(c.useCallback)((function(e){x(e)}),[]),Q=Object(c.useCallback)((function(e){T(e)}),[]),W=Object(c.useCallback)((function(e){G(e)}),[]),_=Object(c.useCallback)((function(e){E(e)}),[]),Z=function(e,t){return new Promise((function(c,a){var r=Object(P.c)(xe,"/".concat(n.uid,"/").concat(e,"/").concat(t.name)),s=Object(P.d)(r,t),o=a;s.on("state_changed",(function(){}),o,(function(){Object(P.a)(s.snapshot.ref).then(c).catch(a)}))}))};function X(){return $.apply(this,arguments)}function $(){return($=Object(C.a)(y.a.mark((function c(){var a,r,o,i,u,j,b,d,h;return y.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:a=[],r=null,o=[],i=[],u=Object(F.a)(L),c.prev=5,u.s();case 7:if((j=u.n()).done){c.next=13;break}return b=j.value,c.next=11,Z("Images",b).then((function(e){a.push(e)}));case 11:c.next=7;break;case 13:c.next=18;break;case 15:c.prev=15,c.t0=c.catch(5),u.e(c.t0);case 18:return c.prev=18,u.f(),c.finish(18);case 21:return d=new File([w],"".concat(t,".md"),{type:"text/markdown"}),c.next=24,Z("Conditions",d).then((function(e){r=e}));case 24:return O.forEach((function(e){e.substring?o.push(e):o.push(e.name)})),D.forEach((function(e){i.push(e.answer)})),h={title:s,theme:l,tags:o,conditionURL:r,images:a,answers:i},console.log(h),c.next=30,n.getIdToken(!0).then((function(t){N.a.post("/task/create",h,{headers:{"Content-Type":"application/json",idToken:t}}).then((function(){e.push("/home"),Y.show("Successfully created!",{timeout:2e3,type:"success"})})).catch((function(e){Y.show("No access!",{timeout:2e3,type:"error"}),console.log(e)}))})).catch((function(e){Y.show("Bad token",{timeout:2e3,type:"error"}),console.log(e)}));case 30:case"end":return c.stop()}}),c,null,[[5,15,18,21]])})))).apply(this,arguments)}var ee=function(){var e=Object(C.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.currentTarget,t.preventDefault(),!1!==n.checkValidity()){e.next=7;break}V(!0),t.stopPropagation(),e.next=10;break;case 7:return console.log("go"),e.next=10,X();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(U.a,{className:"col-md-6 mt-2 mx-auto",noValidate:!0,validated:M,onSubmit:ee,children:[Object(p.jsx)("h2",{className:"text-center",children:"Create new task"}),Object(p.jsx)(de,{getTitle:q,getTheme:J,getTags:K}),Object(p.jsx)(ue,{getCondition:Q}),Object(p.jsx)(Oe,{getAnswer:W}),Object(p.jsx)(ie,{getImages:_}),Object(p.jsx)("div",{className:"d-grid gap-2",children:Object(p.jsx)(B.a,{variant:"primary",size:"lg",type:"submit",children:"Create"})})]})},ge=n(195),ve=n(644);function ke(e){var t=e.taskId,n=e.answers,a=e.solved,r=e.getSolved,s=Object(c.useContext)(f).currentUser,i=Object(c.useState)(""),u=Object(o.a)(i,2),j=u[0],l=u[1],b=Object(m.b)(),d=function(){var e=Object(C.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.getIdToken(!0).then(function(){var e=Object(C.a)(y.a.mark((function e(n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.post("/task/currentAnswer",t,{headers:{"Content-Type":"application/json",idToken:n}}).catch((function(e){b.show("No access!",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){b.show("Bad token",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(C.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!a){e.next=5;break}b.show("The task has already been solved!",{timeout:2e3,type:"info"}),e.next=13;break;case 5:if(!n.includes(j)){e.next=12;break}return b.show("Correct answer!",{timeout:2e3,type:"success"}),e.next=9,d();case 9:r(!0),e.next=13;break;case 12:b.show("Wrong answer!",{timeout:2e3,type:"error"});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(U.a,{className:"col-md-5 mx-auto",onSubmit:h,children:[Object(p.jsxs)(U.a.Group,{children:[Object(p.jsx)(U.a.Label,{as:"h4",children:"Your answer:"}),Object(p.jsx)(U.a.Control,{className:"mt-3",required:!0,type:"text",placeholder:"Enter your answer...",value:j,onChange:function(e){l(e.target.value)}})]}),Object(p.jsx)(B.a,{className:"mt-3 mb-3",variant:"primary",size:"lg",type:"submit",children:"Check"})]})}function we(){var e=Object(c.useState)(0),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),s=Object(o.a)(r,2),i=s[0],j=s[1],l=Object(c.useContext)(f).currentUser,b=Object(c.useState)([]),d=Object(o.a)(b,2),h=d[0],O=d[1],x=Object(c.useState)(""),v=Object(o.a)(x,2),k=v[0],w=v[1],T=Object(c.useState)([]),S=Object(o.a)(T,2),I=S[0],F=S[1],U=Object(c.useState)([]),B=Object(o.a)(U,2),P=B[0],R=B[1],H=Object(g.m)().taskId,M=Object(m.b)(),V=Object(c.useState)(!1),Y=Object(o.a)(V,2),q=Y[0],J=Y[1],K=Object(c.useCallback)((function(e){J(e)}),[]);function Q(e){return W.apply(this,arguments)}function W(){return W=Object(C.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.getIdToken(!0).then(function(){var e=Object(C.a)(y.a.mark((function e(n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.post("/task/addRating",[],{headers:{"Content-Type":"application/json",idToken:n},params:{taskId:H,rating:t}}).catch((function(e){M.show("No access!",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){M.show("Bad token",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),W.apply(this,arguments)}Object(c.useEffect)((function(){function e(){return e=Object(C.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.getIdToken(!0).then(function(){var e=Object(C.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/task/getTask",{headers:{"Content-Type":"application/json",idToken:t},params:{taskId:H}}).then(function(){var e=Object(C.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(t.data.conditionURL).then((function(e){w(e)}));case 2:O(t.data),R(t.data.tags),F(t.data.images),a(t.data.rating);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){M.show("No access!",{timeout:2e3,type:"error"}),console.log(e)}));case 2:return e.next=4,N.a.get("/task/checkSolvedTask",{headers:{"Content-Type":"application/json",idToken:t},params:{taskId:H}}).then((function(e){J(e.data)})).catch((function(e){M.show("No access!",{timeout:2e3,type:"error"}),console.log(e)}));case 4:return e.next=6,N.a.get("/task/checkTaskRated",{headers:{"Content-Type":"application/json",idToken:t},params:{taskId:H}}).then((function(e){j(e.data)})).catch((function(e){M.show("No access!",{timeout:2e3,type:"error"}),console.log(e)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){M.show("Bad token",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}(function(){return e.apply(this,arguments)})().catch((function(e){console.log(e)}))}),[M,l,H]);var _=function(){var e=Object(C.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=7;break}return a(t),j(!0),e.next=5,Q(t);case 5:e.next=8;break;case 7:M.show("You have already set a rating",{timeout:2e3,type:"error"});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)(u.a,{className:" mt-2 mx-auto text-center",children:Object(p.jsxs)(E.a,{children:[Object(p.jsxs)(E.a.Header,{children:[Object(p.jsx)(E.a.Title,{as:"h2",children:h.title}),Object(p.jsx)(z.Rating,{onClick:_,ratingValue:n}),Object(p.jsx)(E.a.Subtitle,{className:"text-muted",children:h.theme}),P.map((function(e,t){return Object(p.jsx)(A.a,{bg:"primary",className:"mx-1",children:e},t)}))]}),Object(p.jsx)(E.a.Body,{children:Object(p.jsxs)($.a,{className:"list-group-flush",children:[Object(p.jsx)(ge.a,{children:Object(p.jsx)(G.a.Markdown,{source:k})}),Object(p.jsx)(ge.a,{children:Object(p.jsx)(pe.a,{children:I.map((function(e,t){return Object(p.jsx)(L.a,{children:Object(p.jsx)(ve.a,{src:e,rounded:!0,width:"30%"})},t)}))})})]})}),Object(p.jsx)(ke,{taskId:h.id,answers:h.answers,solved:q,getSolved:K})]})})}var ye=n(14),Ce=["component"],Te=function(e){var t=e.component,n=Object(ye.a)(e,Ce),a=Object(c.useContext)(f).currentUser;return Object(p.jsx)(g.d,Object(ne.a)(Object(ne.a)({},n),{},{render:function(e){return a?Object(p.jsx)(t,Object(ne.a)({},e)):Object(p.jsx)(g.c,{to:"/login"})}}))};var Se=function(){return Object(p.jsx)(x,{children:Object(p.jsxs)(k.HashRouter,{children:[Object(p.jsx)(v,{}),Object(p.jsxs)(g.g,{children:[Object(p.jsx)(g.d,{exact:!0,path:"/home",component:M}),Object(p.jsx)(g.d,{exact:!0,path:"/",component:M}),Object(p.jsx)(Te,{exact:!0,path:"/admin",component:K}),Object(p.jsx)(g.d,{exact:!0,path:"/login",component:X}),Object(p.jsx)(Te,{exact:!0,path:"/createTask",component:me}),Object(p.jsx)(g.d,{exact:!0,path:"/profile/:uid",component:te}),Object(p.jsx)(g.d,{exact:!0,path:"/task/:taskId",component:we})]})]})})},Ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,651)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))},Ie=(n(625),n(199));s.a.render(Object(p.jsx)(m.a,{template:Ie.a,children:Object(p.jsxs)(k.HashRouter,{children:[Object(p.jsx)(Se,{}),","]})}),document.getElementById("root")),Ne()}},[[626,1,2]]]);
//# sourceMappingURL=main.7987c8eb.chunk.js.map