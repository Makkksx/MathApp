(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{635:function(e,t,n){},637:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(35),o=n.n(r),s=n(13),i=n(656),u=n(649),j=n(658),l=n(62),b=n(44),d=n(197),h=Object(d.a)({apiKey:"AIzaSyAZCTYk0aTKjj0d8ihntd_GuzdodUT4RVQ",authDomain:"poised-cathode-325720.firebaseapp.com",projectId:"poised-cathode-325720",storageBucket:"poised-cathode-325720.appspot.com",messagingSenderId:"286350985232",appId:"1:286350985232:web:bbd8c1efc44e336bd06295",measurementId:"G-LHMQMJVMPJ"}),p=n(1),f=a.a.createContext(),O=Object(b.d)(h),x=function(e){var t=e.children,n=Object(c.useState)(null),a=Object(s.a)(n,2),r=a[0],o=a[1],i=Object(c.useState)(!0),u=Object(s.a)(i,2),j=u[0],l=u[1];return Object(c.useEffect)((function(){O.onAuthStateChanged((function(e){o(e),l(!1)}))}),[]),j?Object(p.jsx)(p.Fragment,{children:"Loading..."}):Object(p.jsx)(f.Provider,{value:{currentUser:r},children:t})},m=n(26),g=n(29),v=n(2),k=n.n(v),w=n(5),y=n(148),C=n(23),T=n.n(C),S=function(){var e=Object(m.b)(),t=Object(c.useContext)(f).currentUser,n=Object(c.useState)(!0),a=Object(s.a)(n,2),r=a[0],o=a[1],i=Object(c.useState)(!1),u=Object(s.a)(i,2),j=u[0],l=u[1];Object(c.useEffect)((function(){var n=function(){var n=Object(w.a)(k.a.mark((function n(){return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.getIdToken(!0).then(function(){var t=Object(w.a)(k.a.mark((function t(n){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.a.get("/auth/getDarkMode",{headers:{"Content-Type":"application/json",idToken:n}}).then((function(e){l(e.data),o(!1)})).catch((function(t){e.show("No access!",{timeout:2e3,type:"error"}),console.log(t)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.show("Bad token",{timeout:2e3,type:"error"}),console.log(t)}));case 2:return n.abrupt("return",j);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();t&&n().catch((function(e){console.log(e)}))}),[e,t,j]);var b=function(){var n=Object(w.a)(k.a.mark((function n(){return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.getIdToken(!0).then(function(){var t=Object(w.a)(k.a.mark((function t(n){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.a.post("/auth/changeDarkMode",[],{headers:{"Content-Type":"application/json",idToken:n}}).catch((function(t){e.show("No access!",{timeout:2e3,type:"error"}),console.log(t)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.show("Bad token",{timeout:2e3,type:"error"}),console.log(t)}));case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),d=function(){var e=Object(w.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,b();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t?r?Object(p.jsx)("div",{}):Object(p.jsx)(y.a,{defaultDarken:j,onChange:d}):Object(p.jsx)(y.a,{})};function N(){var e=Object(g.k)(),t=Object(c.useContext)(f).currentUser,n=Object(c.useState)(!1),a=Object(s.a)(n,2),r=a[0],o=a[1],d=Object(m.b)();Object(c.useEffect)((function(){t?t.getIdTokenResult().then((function(e){e.claims.admin&&!r&&o(!0)})).catch((function(e){d.show("Bad token",{timeout:2e3,type:"error"}),console.log(e)})):o(!1)}),[t,r,d]);return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(i.a,{bg:"light",expand:"lg",children:[Object(p.jsxs)(u.a,{children:[Object(p.jsx)(l.LinkContainer,{to:"/",children:Object(p.jsx)(i.a.Brand,{children:"MathApp"})}),Object(p.jsx)(i.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(p.jsxs)(i.a.Collapse,{id:"basic-navbar-nav",children:[Object(p.jsxs)(j.a,{className:"me-auto",children:[Object(p.jsx)(l.LinkContainer,{to:"/home",children:Object(p.jsx)(j.a.Link,{children:"Home"})}),r?Object(p.jsx)(l.LinkContainer,{to:"/admin",children:Object(p.jsx)(j.a.Link,{children:"Admin"})}):Object(p.jsx)("div",{}),t?Object(p.jsx)(l.LinkContainer,{to:"/createTask",children:Object(p.jsx)(j.a.Link,{children:"Create task"})}):Object(p.jsx)("div",{})]}),Object(p.jsx)(j.a,{children:t?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(l.LinkContainer,{to:"/profile/"+t.uid,children:Object(p.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Profile"})}),Object(p.jsx)("button",{className:"btn btn-primary mx-2",onClick:function(){Object(b.d)().signOut().then((function(){return e.push("/home")}))},type:"submit",children:"Sign-out"})]}):Object(p.jsx)(l.LinkContainer,{to:"/login",children:Object(p.jsx)("button",{className:"btn btn-primary mx-2",type:"submit",children:"Sign-up"})})})]})]}),Object(p.jsx)(S,{})]})})}var I=n(38),F=n(199);function U(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(m.b)();return Object(c.useEffect)((function(){function e(){return(e=Object(w.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("/task/getAllTags").then((function(e){a(e.data)})).catch((function(e){r.show("No access!",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return e.apply(this,arguments)})().catch((function(e){console.log(e)}))}),[r]),Object(p.jsx)(F.TagCloud,{minSize:12,maxSize:35,tags:n})}var E=n(31),L=n(204),B=n(657),A=n(659),D=n(650),R=n(651),P=n(64),G=Object(P.b)(),M=function(e){return new Promise((function(t,n){Object(P.a)(Object(P.c)(G,e)).then(function(){var e=Object(w.a)(k.a.mark((function e(c){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get(c).then((function(e){t(e.data)})).catch((function(e){n(new Error("No access!")),console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))},V=n(81),z=n(92);function H(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(m.b)(),o=Object(c.useState)("dateUp"),i=Object(s.a)(o,2),j=i[0],b=i[1],d=Object(c.useState)(!0),h=Object(s.a)(d,2),O=h[0],x=h[1],g=Object(c.useContext)(f).currentUser;if(Object(c.useEffect)((function(){function e(){return e=Object(w.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("/task/getAllTasks").then(function(){var e=Object(w.a)(k.a.mark((function e(t){var n,c,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(E.a)(t.data),e.prev=1,r=k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.value,e.next=3,M(t.conditionURL).then((function(e){t.condition=e}));case 3:case"end":return e.stop()}}),e)})),n.s();case 4:if((c=n.n()).done){e.next=8;break}return e.delegateYield(r(),"t0",6);case 6:e.next=4;break;case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(1),n.e(e.t1);case 13:return e.prev=13,n.f(),e.finish(13);case 16:a(t.data.sort((function(e,t){return t.id-e.id}))),x(!1);case 18:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){r.show("No access!",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}(function(){return e.apply(this,arguments)})().catch((function(e){console.log(e)}))}),[r]),O)return Object(p.jsx)(p.Fragment,{children:"Loading..."});return Object(p.jsxs)(u.a,{className:"mt-2",children:[Object(p.jsx)(L.a,{md:3,className:"text-end",children:Object(p.jsxs)(B.a.Select,{value:j,onChange:function(e){b(e.target.value),"dateUp"===e.target.value?a(n.sort((function(e,t){return t.id-e.id}))):"ratingUp"===e.target.value?a(n.sort((function(e,t){return t.rating-e.rating}))):"dateDown"===e.target.value?a(n.sort((function(e,t){return e.id-t.id}))):"ratingDown"===e.target.value&&a(n.sort((function(e,t){return e.rating-t.rating})))},children:[Object(p.jsx)("option",{value:"dateUp",children:"Sort by date (recent first)"}),Object(p.jsx)("option",{value:"dateDown",children:"Sort by date (recent first)"}),Object(p.jsx)("option",{value:"ratingUp",children:"Sort by rating (high first)"}),Object(p.jsx)("option",{value:"ratingDown",children:"Sort by rating (high first)"})]})}),n.map((function(e,t){return Object(p.jsxs)(A.a,{className:"mt-2",children:[Object(p.jsxs)(A.a.Header,{children:[Object(p.jsx)(A.a.Title,{as:"h2",children:e.title}),Object(p.jsx)(z.RatingView,{ratingValue:e.rating}),Object(p.jsx)(A.a.Subtitle,{className:"text-muted",children:e.theme}),e.tags.map((function(e,t){return Object(p.jsx)(D.a,{bg:"primary",className:"mx-1",children:e},t)}))]}),Object(p.jsxs)(A.a.Body,{children:[Object(p.jsx)(V.a.Markdown,{source:e.condition}),g?Object(p.jsx)(l.LinkContainer,{to:"/task/"+e.id,children:Object(p.jsx)(R.a,{className:"mt-2",children:"Go to task"})}):Object(p.jsx)("div",{})]})]},t)}))]})}var Y=function(){return Object(p.jsxs)("div",{className:"container mt-3 text-center",children:[Object(p.jsx)(U,{}),Object(p.jsx)(H,{})]})},q=n(117),J=n.n(q),K=n(660);function Q(){var e=Object(c.useContext)(f).currentUser,t=Object(c.useState)([]),n=Object(s.a)(t,2),a=n[0],r=n[1],o=Object(c.useState)(1),i=Object(s.a)(o,2),u=i[0],j=i[1],l=Object(m.b)(),b=Object(g.k)(),d={onClick:function(e,t,n){b.push("/profile/"+t.uid)}};Object(c.useEffect)((function(){e?e.getIdToken(!0).then(function(){var e=Object(w.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("/admin/getAll",{headers:{"Content-Type":"application/json",idToken:t}}).then((function(e){r(e.data)})).catch((function(e){l.show("You are not an admin!",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){l.show("No access!",{timeout:2e3,type:"error"}),console.log(e)})):l.show("Please login to view",{timeout:2e3,type:"error"})}),[l,e]);for(var h=Object(c.useMemo)((function(){var e=5*(u-1),t=e+5;return a.slice(e,t)}),[u,a]),O=[],x=function(e){O.push(Object(p.jsx)(K.a.Item,{active:e===u,onClick:function(){return j(e)},children:e},e))},v=1;v<=(a.length/5|0);v++)x(v);return Object(p.jsxs)("div",{className:"container",style:{marginTop:50},children:[Object(p.jsx)(J.a,{striped:!0,hover:!0,keyField:"id",data:h,columns:[{dataField:"uid",text:"ID",sort:!0},{dataField:"username",text:"Name",sort:!0},{dataField:"email",text:"Email",sort:!0},{dataField:"provider",text:"Provider",sort:!0}],rowEvents:d}),Object(p.jsx)(K.a,{children:O})]})}var W=function(){return Object(p.jsx)(u.a,{children:Object(p.jsx)(Q,{})})},_=new b.c,Z=new b.a,X=new b.b,$=Object(b.d)(h),ee=function(){var e=Object(m.b)(),t=Object(c.useContext)(f).currentUser,n=function(){var t=Object(w.a)(k.a.mark((function t(n){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(b.e)($,n);case 2:return t.next=4,$.currentUser.getIdToken(!0).then((function(t){T.a.post("/auth/login",{},{headers:{"Content-Type":"application/json",idToken:t}}).catch((function(t){e.show("No access!",{timeout:2e3,type:"error"}),console.log(t)}))})).catch((function(t){e.show("Bad token",{timeout:2e3,type:"error"}),console.log(t)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return t?Object(p.jsx)(g.c,{to:"/"}):Object(p.jsxs)("div",{className:"container mt-3 mb-2 text-center",children:[Object(p.jsx)("div",{className:"container mt-2 mb-2",children:Object(p.jsx)("div",{className:"btn btn-lg btn-secondary fab fa-google col-3",onClick:function(){return n(_)},children:"Continue with Google"})}),Object(p.jsx)("div",{className:"container mt-2 mb-2",children:Object(p.jsx)("div",{className:"btn btn-lg btn-secondary fab fa-facebook col-3",onClick:function(){return n(Z)},children:"Continue with Facebook"})}),Object(p.jsx)("div",{className:"container mt-2 mb-2",children:Object(p.jsx)("div",{className:"btn btn-lg btn-secondary fab fa-github col-3",onClick:function(){return n(X)},children:"Continue with GitHub"})})]})},te=n(652);function ne(e){var t=Object(g.k)(),n=Object(c.useContext)(f).currentUser,a=Object(c.useState)([]),r=Object(s.a)(a,2),o=r[0],i=r[1],u=Object(m.b)();Object(c.useEffect)((function(){function t(){return t=Object(w.a)(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getIdToken(!0).then(function(){var t=Object(w.a)(k.a.mark((function t(n){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.a.get("/task/getUserTasks",{headers:{"Content-Type":"application/json",idToken:n},params:{uid:e.uid}}).then((function(e){i(e.data)})).catch((function(e){u.show("No access!",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){u.show("Bad token",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}(function(){return t.apply(this,arguments)})().catch((function(e){console.log(e)}))}),[e,u,n]);var j={onClick:function(e,n,c){t.push("/task/"+n.id)}};return Object(p.jsx)("div",{children:o.length?Object(p.jsx)("div",{className:"container",style:{marginTop:50},children:Object(p.jsx)(J.a,{striped:!0,hover:!0,keyField:"id",data:o,columns:[{dataField:"id",text:"Task id",sort:!0},{dataField:"title",text:"Title",sort:!0},{dataField:"theme",text:"Theme",sort:!0}],rowEvents:j})}):Object(p.jsx)("div",{})})}function ce(){var e=Object(c.useContext)(f).currentUser,t=Object(c.useState)([]),n=Object(s.a)(t,2),a=n[0],r=n[1],o=Object(g.m)().uid,i=Object(m.b)();return Object(c.useEffect)((function(){function t(){return t=Object(w.a)(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getIdToken(!0).then(function(){var e=Object(w.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("/admin/getProfile",{headers:{"Content-Type":"application/json",idToken:t},params:{uid:o}}).then((function(e){r(e.data)})).catch((function(e){i.show("No access!",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){i.show("Bad token",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}(function(){return t.apply(this,arguments)})().catch((function(e){console.log(e)}))}),[o,e,i]),a?Object(p.jsxs)(u.a,{className:"mt-2",children:[Object(p.jsxs)(A.a,{children:[Object(p.jsx)(A.a.Header,{children:Object(p.jsx)(A.a.Title,{as:"h2",children:a.username})}),Object(p.jsx)(A.a.Body,{children:Object(p.jsxs)(te.a,{variant:"flush",children:[Object(p.jsxs)(te.a.Item,{as:"h5",children:["Number of tasks created: ",a.createdTasks]}),Object(p.jsxs)(te.a.Item,{as:"h5",children:["Number of solved tasks: ",a.solvedTasks]})]})})]}),a.uid?Object(p.jsx)(ne,{uid:a.uid}):Object(p.jsx)(p.Fragment,{children:"Loading..."})]}):Object(p.jsx)("p",{children:"User not found"})}var ae=n(6),re=n(211),oe={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:2,borderColor:"#eeeeee",borderStyle:"dashed",backgroundColor:"#fafafa",color:"#bdbdbd",outline:"none",transition:"border .24s ease-in-out"},se={borderColor:"#2196f3"},ie={borderColor:"#00e676"},ue={borderColor:"#ff1744"};function je(e){var t=e.getImages;var n=Object(re.a)({maxFiles:2,validator:function(e){return["image/bmp","image/jpeg","image/jpg","image/png"].includes(e.type)?null:{code:"wrong-type",message:"Images only"}}}),a=n.acceptedFiles,r=n.fileRejections,o=n.getRootProps,s=n.getInputProps,i=n.isDragActive,u=n.isDragAccept,j=n.isDragReject,l=a.map((function(e){return Object(p.jsxs)("li",{children:[e.path," - ",e.size," bytes"]},e.path)})),b=r.map((function(e){var t=e.file,n=e.errors;return Object(p.jsxs)("li",{children:[t.path," - ",t.size," bytes",Object(p.jsx)("ul",{children:n.map((function(e){return Object(p.jsx)("li",{children:e.message},e.code)}))})]},t.path)})),d=Object(c.useMemo)((function(){return Object(ae.a)(Object(ae.a)(Object(ae.a)(Object(ae.a)({},oe),i?se:{}),u?ie:{}),j?ue:{})}),[i,j,u]);return Object(c.useEffect)((function(){t(a)}),[t,a]),Object(p.jsxs)("section",{className:"container mt-2",children:[Object(p.jsx)("h4",{children:"Add images"}),Object(p.jsxs)("div",Object(ae.a)(Object(ae.a)({},o({style:d})),{},{children:[Object(p.jsx)("input",Object(ae.a)({},s())),Object(p.jsx)("p",{children:"Drag 'n' drop some files here, or click to select files"}),Object(p.jsx)("em",{children:"(3 files are the maximum number of files you can drop here)"})]})),Object(p.jsxs)("aside",{className:"mt-2",children:[Object(p.jsx)("h5",{children:"Accepted files"}),Object(p.jsx)("ul",{children:l}),Object(p.jsx)("h5",{children:"Rejected files"}),Object(p.jsx)("ul",{children:b})]})]})}function le(e){var t=e.getCondition,n=Object(c.useState)("**Condition here**"),a=Object(s.a)(n,2),r=a[0],o=a[1];return Object(c.useEffect)((function(){t(r)}),[t,r]),Object(p.jsxs)("div",{className:"container mt-3",children:[Object(p.jsx)("h4",{children:"Set condition"}),Object(p.jsx)(V.a,{value:r,onChange:o})]})}var be=n(661),de=n(210),he=(n(634),n(635),Object(b.d)(h));function pe(e){var t=e.getTitle,n=e.getTheme,a=e.getTags,r=Object(c.useState)(""),o=Object(s.a)(r,2),i=o[0],u=o[1],j=Object(c.useState)(""),l=Object(s.a)(j,2),b=l[0],d=l[1],h=Object(c.useState)([]),f=Object(s.a)(h,2),O=f[0],x=f[1],g=Object(c.useState)([]),v=Object(s.a)(g,2),y=v[0],C=v[1],S=Object(c.useState)([]),N=Object(s.a)(S,2),I=N[0],F=N[1],U=Object(m.b)();Object(c.useEffect)((function(){t(i)}),[t,i]),Object(c.useEffect)((function(){n(b)}),[b,n]),Object(c.useEffect)((function(){a(O)}),[a,O]),Object(c.useEffect)((function(){function e(){return e=Object(w.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he.currentUser.getIdToken(!0).then(function(){var e=Object(w.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("/task/getAllTagNames",{headers:{"Content-Type":"application/json",idToken:t}}).then((function(e){C(e.data)})).catch((function(e){U.show("No access!",{timeout:2e3,type:"error"}),console.log(e)}));case 2:return e.next=4,T.a.get("/task/getAllThemes",{headers:{"Content-Type":"application/json",idToken:t}}).then((function(e){F(e.data),d(e.data[0])})).catch((function(e){U.show("No access!",{timeout:2e3,type:"error"}),console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){U.show("Bad token",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}(function(){return e.apply(this,arguments)})().catch((function(e){console.log(e)}))}),[U]);var E=function(e){var t=e.value,n=e.options,c=e.onChange;return Object(p.jsx)(B.a.Select,{required:!0,value:t,onChange:c,children:n.map((function(e){return Object(p.jsx)("option",{value:e,children:e},e)}))})};return Object(p.jsxs)(be.a,{gap:3,className:"container mt-2 mx-auto",children:[Object(p.jsxs)(B.a.Group,{children:[Object(p.jsx)(B.a.Label,{as:"h4",children:"Choose title"}),Object(p.jsx)(B.a.Control,{required:!0,type:"text",placeholder:"Choose a title...",value:i,onChange:function(e){u(e.target.value)}}),Object(p.jsx)(B.a.Control.Feedback,{type:"invalid",children:"Please choose a title."})]}),Object(p.jsxs)(B.a.Group,{children:[Object(p.jsx)(B.a.Label,{as:"h4",children:"Chose theme"}),Object(p.jsx)(E,{value:b,options:I,onChange:function(e){d(e.target.value)}}),Object(p.jsx)(B.a.Control.Feedback,{type:"invalid",children:"Please choose a theme."})]}),Object(p.jsxs)(B.a.Group,{children:[Object(p.jsx)(B.a.Label,{as:"h4",children:"Choose tags"}),Object(p.jsx)(de.a,{clearButton:!0,allowNew:!0,id:"tags",labelKey:"name",multiple:!0,onChange:x,options:y,placeholder:"Choose tags...",selected:O})]})]})}var fe=n(17),Oe=n(653),xe=n(654);function me(e){var t=e.getAnswer,n=Object(c.useState)([{answer:""}]),a=Object(s.a)(n,2),r=a[0],o=a[1];Object(c.useEffect)((function(){t(r)}),[t,r]);var i=function(){var e=Object(fe.a)(r);e.length<3&&(e.push({answer:""}),o(e))},u=function(e){var t=Object(fe.a)(r);t.length>1&&(t.splice(e,1),o(t))},j=function(e,t){var n=Object(fe.a)(r);n[e].answer=t.target.value,o(n)};return Object(p.jsxs)(B.a.Group,{className:"container mt-2",children:[Object(p.jsx)(B.a.Label,{children:Object(p.jsx)("h4",{children:"Set answers"})}),r.map((function(e,t){return Object(p.jsx)(c.Fragment,{children:Object(p.jsxs)(Oe.a,{className:"mt-2",children:[Object(p.jsxs)(L.a,{md:10,children:[Object(p.jsx)(B.a.Control,{required:!0,type:"text",placeholder:"Answer",value:e.answer,onChange:function(e){return j(t,e)}}),Object(p.jsx)(B.a.Control.Feedback,{type:"invalid",children:"Please set a answer."})]}),Object(p.jsx)(L.a,{md:2,children:Object(p.jsxs)(xe.a,{children:[Object(p.jsx)(R.a,{variant:"secondary",onClick:function(){return u(t)},children:"-"}),Object(p.jsx)(R.a,{variant:"secondary",onClick:function(){return i()},children:"+"})]})})]})},"".concat(e,"~").concat(t))}))]})}var ge=Object(P.b)(),ve=function(){var e=Object(g.k)(),t=(new Date).getTime(),n=Object(c.useContext)(f).currentUser,a=Object(c.useState)(""),r=Object(s.a)(a,2),o=r[0],i=r[1],u=Object(c.useState)(""),j=Object(s.a)(u,2),l=j[0],b=j[1],d=Object(c.useState)(null),h=Object(s.a)(d,2),O=h[0],x=h[1],v=Object(c.useState)(null),y=Object(s.a)(v,2),C=y[0],S=y[1],N=Object(c.useState)(null),I=Object(s.a)(N,2),F=I[0],U=I[1],L=Object(c.useState)([]),A=Object(s.a)(L,2),D=A[0],G=A[1],M=Object(c.useState)(!1),V=Object(s.a)(M,2),z=V[0],H=V[1],Y=Object(m.b)(),q=Object(c.useCallback)((function(e){i(e)}),[]),J=Object(c.useCallback)((function(e){b(e)}),[]),K=Object(c.useCallback)((function(e){x(e)}),[]),Q=Object(c.useCallback)((function(e){S(e)}),[]),W=Object(c.useCallback)((function(e){G(e)}),[]),_=Object(c.useCallback)((function(e){U(e)}),[]),Z=function(e,t){return new Promise((function(c,a){var r=Object(P.c)(ge,"/".concat(n.uid,"/").concat(e,"/").concat(t.name)),o=Object(P.d)(r,t),s=a;o.on("state_changed",(function(){}),s,(function(){Object(P.a)(o.snapshot.ref).then(c).catch(a)}))}))};function X(){return $.apply(this,arguments)}function $(){return($=Object(w.a)(k.a.mark((function c(){var a,r,s,i,u,j,b,d,h;return k.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:a=[],r=null,s=[],i=[],u=Object(E.a)(F),c.prev=5,u.s();case 7:if((j=u.n()).done){c.next=13;break}return b=j.value,c.next=11,Z("Images",b).then((function(e){a.push(e)}));case 11:c.next=7;break;case 13:c.next=18;break;case 15:c.prev=15,c.t0=c.catch(5),u.e(c.t0);case 18:return c.prev=18,u.f(),c.finish(18);case 21:return d=new File([C],"".concat(t,".md"),{type:"text/markdown"}),c.next=24,Z("Conditions",d).then((function(e){r=e}));case 24:return O.forEach((function(e){e.substring?s.push(e):s.push(e.name)})),D.forEach((function(e){i.push(e.answer)})),h={title:o,theme:l,tags:s,conditionURL:r,images:a,answers:i},console.log(h),c.next=30,n.getIdToken(!0).then((function(t){T.a.post("/task/create",h,{headers:{"Content-Type":"application/json",idToken:t}}).then((function(){e.push("/home"),Y.show("Successfully created!",{timeout:2e3,type:"success"})})).catch((function(e){Y.show("No access!",{timeout:2e3,type:"error"}),console.log(e)}))})).catch((function(e){Y.show("Bad token",{timeout:2e3,type:"error"}),console.log(e)}));case 30:case"end":return c.stop()}}),c,null,[[5,15,18,21]])})))).apply(this,arguments)}var ee=function(){var e=Object(w.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.currentTarget,t.preventDefault(),!1!==n.checkValidity()){e.next=7;break}H(!0),t.stopPropagation(),e.next=10;break;case 7:return console.log("go"),e.next=10,X();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(B.a,{className:"col-md-6 mt-2 mx-auto",noValidate:!0,validated:z,onSubmit:ee,children:[Object(p.jsx)("h2",{className:"text-center",children:"Create new task"}),Object(p.jsx)(pe,{getTitle:q,getTheme:J,getTags:K}),Object(p.jsx)(le,{getCondition:Q}),Object(p.jsx)(me,{getAnswer:W}),Object(p.jsx)(je,{getImages:_}),Object(p.jsx)("div",{className:"d-grid gap-2",children:Object(p.jsx)(R.a,{variant:"primary",size:"lg",type:"submit",children:"Create"})})]})},ke=n(205),we=n(655);function ye(e){var t=e.taskId,n=e.answers,a=e.solved,r=e.getSolved,o=Object(c.useContext)(f).currentUser,i=Object(c.useState)(""),u=Object(s.a)(i,2),j=u[0],l=u[1],b=Object(m.b)(),d=function(){var e=Object(w.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.getIdToken(!0).then(function(){var e=Object(w.a)(k.a.mark((function e(n){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.post("/task/currentAnswer",t,{headers:{"Content-Type":"application/json",idToken:n}}).catch((function(e){b.show("No access!",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){b.show("Bad token",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(w.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!a){e.next=5;break}b.show("The task has already been solved!",{timeout:2e3,type:"info"}),e.next=13;break;case 5:if(!n.includes(j)){e.next=12;break}return b.show("Correct answer!",{timeout:2e3,type:"success"}),e.next=9,d();case 9:r(!0),e.next=13;break;case 12:b.show("Wrong answer!",{timeout:2e3,type:"error"});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(B.a,{className:"col-md-5 mx-auto",onSubmit:h,children:[Object(p.jsxs)(B.a.Group,{children:[Object(p.jsx)(B.a.Label,{as:"h4",children:"Your answer:"}),Object(p.jsx)(B.a.Control,{className:"mt-3",required:!0,type:"text",placeholder:"Enter your answer...",value:j,onChange:function(e){l(e.target.value)}})]}),Object(p.jsx)(R.a,{className:"mt-3 mb-3",variant:"primary",size:"lg",type:"submit",children:"Check"})]})}function Ce(){var e=Object(c.useState)(0),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),o=Object(s.a)(r,2),i=o[0],j=o[1],l=Object(c.useContext)(f).currentUser,b=Object(c.useState)([]),d=Object(s.a)(b,2),h=d[0],O=d[1],x=Object(c.useState)(""),v=Object(s.a)(x,2),y=v[0],C=v[1],S=Object(c.useState)([]),N=Object(s.a)(S,2),I=N[0],F=N[1],U=Object(c.useState)([]),E=Object(s.a)(U,2),B=E[0],R=E[1],P=Object(g.m)().taskId,G=Object(m.b)(),H=Object(c.useState)(!1),Y=Object(s.a)(H,2),q=Y[0],J=Y[1],K=Object(c.useCallback)((function(e){J(e)}),[]);function Q(e){return W.apply(this,arguments)}function W(){return W=Object(w.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.getIdToken(!0).then(function(){var e=Object(w.a)(k.a.mark((function e(n){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.post("/task/addRating",[],{headers:{"Content-Type":"application/json",idToken:n},params:{taskId:P,rating:t}}).catch((function(e){G.show("No access!",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){G.show("Bad token",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),W.apply(this,arguments)}Object(c.useEffect)((function(){function e(){return e=Object(w.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.getIdToken(!0).then(function(){var e=Object(w.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("/task/getTask",{headers:{"Content-Type":"application/json",idToken:t},params:{taskId:P}}).then(function(){var e=Object(w.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t.data.conditionURL).then((function(e){C(e)}));case 2:O(t.data),R(t.data.tags),F(t.data.images),a(t.data.rating);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){G.show("No access!",{timeout:2e3,type:"error"}),console.log(e)}));case 2:return e.next=4,T.a.get("/task/checkSolvedTask",{headers:{"Content-Type":"application/json",idToken:t},params:{taskId:P}}).then((function(e){J(e.data)})).catch((function(e){G.show("No access!",{timeout:2e3,type:"error"}),console.log(e)}));case 4:return e.next=6,T.a.get("/task/checkTaskRated",{headers:{"Content-Type":"application/json",idToken:t},params:{taskId:P}}).then((function(e){j(e.data)})).catch((function(e){G.show("No access!",{timeout:2e3,type:"error"}),console.log(e)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){G.show("Bad token",{timeout:2e3,type:"error"}),console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}(function(){return e.apply(this,arguments)})().catch((function(e){console.log(e)}))}),[G,l,P]);var _=function(){var e=Object(w.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=7;break}return a(t),j(!0),e.next=5,Q(t);case 5:e.next=8;break;case 7:G.show("You have already set a rating",{timeout:2e3,type:"error"});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)(u.a,{className:" mt-2 mx-auto text-center",children:Object(p.jsxs)(A.a,{children:[Object(p.jsxs)(A.a.Header,{children:[Object(p.jsx)(A.a.Title,{as:"h2",children:h.title}),i?Object(p.jsx)(z.RatingView,{ratingValue:n}):Object(p.jsx)(z.Rating,{onClick:_,ratingValue:n}),Object(p.jsx)(A.a.Subtitle,{className:"text-muted",children:h.theme}),B.map((function(e,t){return Object(p.jsx)(D.a,{bg:"primary",className:"mx-1",children:e},t)}))]}),Object(p.jsx)(A.a.Body,{children:Object(p.jsxs)(te.a,{className:"list-group-flush",children:[Object(p.jsx)(ke.a,{children:Object(p.jsx)(V.a.Markdown,{source:y})}),Object(p.jsx)(ke.a,{children:Object(p.jsx)(Oe.a,{children:I.map((function(e,t){return Object(p.jsx)(L.a,{children:Object(p.jsx)(we.a,{src:e,rounded:!0,width:"30%"})},t)}))})})]})}),Object(p.jsx)(ye,{taskId:h.id,answers:h.answers,solved:q,getSolved:K})]})})}var Te=n(12),Se=["component"],Ne=function(e){var t=e.component,n=Object(Te.a)(e,Se),a=Object(c.useContext)(f).currentUser;return Object(p.jsx)(g.d,Object(ae.a)(Object(ae.a)({},n),{},{render:function(e){return a?Object(p.jsx)(t,Object(ae.a)({},e)):Object(p.jsx)(g.c,{to:"/login"})}}))};var Ie=function(){return Object(p.jsx)(x,{children:Object(p.jsxs)(I.HashRouter,{children:[Object(p.jsx)(N,{}),Object(p.jsxs)(g.g,{children:[Object(p.jsx)(g.d,{exact:!0,path:"/home",component:Y}),Object(p.jsx)(g.d,{exact:!0,path:"/",component:Y}),Object(p.jsx)(Ne,{exact:!0,path:"/admin",component:W}),Object(p.jsx)(g.d,{exact:!0,path:"/login",component:ee}),Object(p.jsx)(Ne,{exact:!0,path:"/createTask",component:ve}),Object(p.jsx)(g.d,{exact:!0,path:"/profile/:uid",component:ce}),Object(p.jsx)(g.d,{exact:!0,path:"/task/:taskId",component:Ce})]})]})})},Fe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,662)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),r(e),o(e)}))},Ue=(n(636),n(209));o.a.render(Object(p.jsx)(m.a,{template:Ue.a,children:Object(p.jsxs)(I.HashRouter,{children:[Object(p.jsx)(Ie,{}),","]})}),document.getElementById("root")),Fe()}},[[637,1,2]]]);
//# sourceMappingURL=main.b12fa54e.chunk.js.map